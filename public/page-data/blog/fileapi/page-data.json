{"componentChunkName":"component---src-templates-page-js","path":"/blog/fileapi","webpackCompilationHash":"9184727d4eaabf167010","result":{"data":{"markdownRemark":{"frontmatter":{"title":"Basic Understanding of File Api","date":"Thu, 25th July 2019","tags":["javascript"],"thumbnail":{"childImageSharp":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsSAAALEgHS3X78AAACbElEQVQ4y+2V30tTYRjH90cECVpZRhdunf208sfWZjnn3NnOjOgiugkCqYusbqIuI+hGKiSQMiQQIjChbnMXQj+uEmphntTSSmc4z9kqzUz37Xmfs01HaiO87OLh7Ox9n8/7fL/P83JM+kgE2up4F/6n0LNPk5592awwaf+Bhsly/reu5tbkggbouX25dXUTKtTUwgP0Yrs8OyxzaOrqd6Oq5NuV/4sGLnyMcDCMkhcmIhxfR8NY/Kzg+/tIHmraSE5qJIyZIRkX22rQdroaibhMYAVPev04eWI/omEXLl+ohfqiGd/GDOi6HmqqjDQBp9+E4HbbYXdYkSSpg7EA9koSJKuEpkYntpRU4sypA5j7EOHqNwSmGChTogN1dTZOunPDi62lleju8AF6Cx501SM+0MTytb9JTmeBjX4HamtsnPS45zC2lZtxtKUKsb4G/JpUsEQhGqUXA/xCwIDfybKFh6Lqs63VKCPozt0WBg888uPHRFby2mNiPFMUiXiIKnTC47Fj8lWIOyqk93YfwvFj+xjqdFkx2B/A3HjkT+AseSdGQszXPG1Ik8wAeegmD4V8IVt9HgSSUWAmiutXPSgpM6Pj2kEsJ6IGUDQgN7DilP6HDexbT6ePfZJsEsl2MOwcjY+rysrNGH4WxKXzNdykrpteLE0phRUK4HwWaLNLbP6OXRZU7LFwQiah4N4tX36tvMKC0u1mHFFcGH/ZjPTYGpI18u8n3Qpxeme7lyXF+vzsnbhqi58UDD0N4i4d0H7Fg/u36zH12vB2/abQgtiwTBVlyBdxO1buMa1RU4S8zHSUxyY9asDE5+Q3DE1/m6OVCiYAAAAASUVORK5CYII=","width":150,"height":150,"src":"/static/958cb5fcf40d0196ffc68166b4dc1522/4148e/js.png","srcSet":"/static/958cb5fcf40d0196ffc68166b4dc1522/4148e/js.png 1x"}}}},"html":"<p> One of my favourite and exciting topic was how can i implement file uploading in my website. I used to watch youtube videos where they do it with <code class=\"language-text\">PHP</code>. But they all just don't workout for me. Thank god there's <code class=\"language-text\">File API</code> which  allows javascript to access information about file like <code class=\"language-text\">Name</code>, <code class=\"language-text\">Last modified</code>, <code class=\"language-text\">Type</code>, <code class=\"language-text\">Size</code>, <code class=\"language-text\">webkitRelativePath</code>. Let's dive deeper on how to use it.</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token comment\">&lt;!--  to get file as input --></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>file<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p> Initial input value would be zero and as the user selects file it changes.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//  selecting element</span>\n<span class=\"token keyword\">const</span> el <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'input[type=file]'</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">//  fire an event handler when the input value changes</span>\n   el<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'change'</span><span class=\"token punctuation\">,</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n   <span class=\"token keyword\">const</span> fileList <span class=\"token operator\">=</span> el<span class=\"token punctuation\">.</span>files<span class=\"token punctuation\">;</span> <span class=\"token comment\">/* now you can work with the file list */</span>    \n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p> Each file object provides three useful information about file.</p>\n<ul>\n<li><code class=\"language-text\">Name</code> : The file's name as a read-only string. This is just the file name, and does not include any path information. </li>\n<li><code class=\"language-text\">Size</code> : The size of the file in bytes as a read-only 64-bit integer.</li>\n<li><code class=\"language-text\">Type</code> : The MIME type of the file as a read-only string or <code class=\"language-text\">&quot;&quot;</code> if the type couldn't be determined.</li>\n</ul>\n<p>Until Now we have got the filelist selected by user. let's do some operations on this.</p>\n<h3>Getting Information about selected files</h3>\n<hr>\n<p> Let's say we want an image less than 5MB. To allow multiplle files we can  add multiple attribute to input tag.</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>file<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">multiple</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p> It will give us all object in filelist object.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// using foreach loop to iterate through all object</span>\n<span class=\"token comment\">// 5 Mb have 5*1024 byte</span>\nfileList<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">file</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">{</span>\n   <span class=\"token comment\">// taking each file as file variable</span>\n<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>file<span class=\"token punctuation\">.</span>size <span class=\"token operator\">&lt;=</span> <span class=\"token number\">5</span><span class=\"token operator\">*</span><span class=\"token number\">1024</span> <span class=\"token operator\">&amp;&amp;</span> file<span class=\"token punctuation\">.</span>type <span class=\"token operator\">==</span> <span class=\"token string\">\"image/jpeg\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n   <span class=\"token comment\">// do something</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">else</span><span class=\"token punctuation\">{</span>\n   <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"File size Excedded\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Above I have used ES6 classes. If You are not comfortable with that. Don't worry. I have simplified it further.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">fileList<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">file</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// referring each file as file variable</span>\n<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>file<span class=\"token punctuation\">.</span>size <span class=\"token operator\">&lt;=</span> <span class=\"token number\">5</span><span class=\"token operator\">*</span><span class=\"token number\">1024</span> <span class=\"token operator\">&amp;&amp;</span> file<span class=\"token punctuation\">.</span>type<span class=\"token operator\">=</span><span class=\"token string\">\"image/jpeg\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// do something</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">else</span><span class=\"token punctuation\">{</span>\n    <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"File size excedded.\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>","fields":{"slug":"fileapi"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"fileapi"}}}